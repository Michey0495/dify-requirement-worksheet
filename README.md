# Difyカスタムワークフロー構築：要件定義ワークシート

このWebアプリケーションは、あなたの「なんとなく楽になりたい業務」を、Difyで実装可能な「システム要件」に変換するための設計図です。

## 機能

- **業務の棚卸し**: 現状の悩みと理想の状態を整理
- **システム設計**: Input → Process → Output の3ステップで設計
- **開発ステップ**: MVPから完成形までの段階的な開発計画
- **データエクスポート**: 入力内容をJSON形式でエクスポート可能

## 技術スタック

- **Next.js 14**: Reactフレームワーク
- **TypeScript**: 型安全性の確保
- **Tailwind CSS**: スタイリング
- **Vercel**: デプロイメント

## セットアップ

### 必要な環境

- Node.js 18以上
- npm または yarn

### インストール

```bash
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開いてください。

### ビルド

```bash
npm run build
```

### 本番環境での起動

```bash
npm start
```

## Vercelへのデプロイ

1. [Vercel](https://vercel.com)にアカウントを作成
2. GitHubリポジトリにプッシュ
3. Vercelダッシュボードから「New Project」を選択
4. リポジトリをインポート
5. デプロイ設定は自動検出されます

または、Vercel CLIを使用:

```bash
npm i -g vercel
vercel
```

## フォント

このアプリケーションは以下のフォントを使用しています:

- Hiragino Kaku Gothic ProN
- Hiragino Sans
- Meiryo
- sans-serif

## エクスポートデータの使い方

このアプリケーションで入力した要件定義データは、JSON形式でエクスポートできます。エクスポートされたデータは以下のような用途で活用できます。

### DifyアシスタントGemへの活用

エクスポートしたJSONデータをDifyアシスタントGemに渡すことで、要件定義に基づいたワークフローの構築方法を丁寧に教えてもらえます。

**使い方の例:**

1. このアプリで要件定義を入力し、「データをエクスポート」ボタンをクリック
2. エクスポートされた`requirement-worksheet.json`ファイルを準備
3. DifyアシスタントGem（またはDifyのチャット機能）に以下のようなプロンプトで質問:

```
以下の要件定義データを基に、Difyでワークフローを構築する方法を教えてください。
要件定義データ:
[エクスポートしたJSONデータを貼り付け]

特に以下の点について詳しく説明してください:
- 必要なノードの種類と配置
- 各ノードの設定方法
- 入力から出力までの処理フロー
- 実装時の注意点
```

### その他の活用方法

- **プロジェクト管理**: 要件定義をチームで共有し、開発計画のベースとして使用
- **ドキュメント化**: エクスポートしたデータをMarkdownやPDFに変換してドキュメントとして保存
- **バージョン管理**: Gitで要件定義の変更履歴を管理

## 高品質なDifyアシスタントGemの作り方

エクスポートした要件定義データを活用して、高品質なDifyアシスタントGemを作成するためのベストプラクティスを紹介します。

### 1. 要件定義の徹底

- **明確な目的設定**: 業務の棚卸しセクションで、現状の悩みと理想の状態を明確に定義
- **具体的な入力・出力**: システム設計セクションで、InputとOutputを具体的に記述
- **段階的な開発**: 開発ステップセクションで、MVPから完成形までの道筋を明確化

### 2. プロンプト設計のポイント

#### システムプロンプトの構成

```
あなたはDifyワークフロー構築の専門家です。
以下の要件定義に基づいて、具体的で実装可能なワークフロー構築方法を提供してください。

【要件定義】
[エクスポートしたJSONデータの内容を構造化して記載]

【回答の構成】
1. ワークフロー全体の概要
2. 必要なノードとその配置
3. 各ノードの詳細設定
4. 実装手順
5. テスト方法
6. よくある問題と解決策
```

#### コンテキストの活用

- エクスポートしたJSONデータをそのままコンテキストとして渡す
- 必要に応じて、特定のセクション（Input、Process、Output）に焦点を当てた質問も可能

### 3. 知識ベースの構築

DifyアシスタントGemに以下のような知識を追加すると、より高品質な回答が得られます:

- **Difyノードの種類と使い方**: LLM、知識検索、条件分岐、HTTPリクエストなど
- **ワークフロー設計パターン**: よくあるパターンとベストプラクティス
- **トラブルシューティング**: よくある問題と解決方法

### 4. 反復的な改善

1. **初回構築**: エクスポートデータを基に、基本的なワークフローを構築
2. **テストとフィードバック**: 実際に動作させて、問題点を洗い出す
3. **要件定義の更新**: 発見した問題を要件定義に反映し、再度エクスポート
4. **改善サイクル**: このサイクルを繰り返して、品質を向上

### 5. 実装例

**例: 社内ナレッジ検索チャットボット**

要件定義データの例:
```json
{
  "formData": {
    "businessName": "社内ナレッジ検索",
    "currentPain": "過去の回答を探すのに時間がかかる",
    "idealGain": "質問を入れるとマニュアルから回答案が出る",
    "inputItems": "user_query (ユーザーの質問)",
    "processFlow": "1. ユーザーからの質問を受け取る\n2. 社内マニュアル（知識）から関連情報を検索する\n3. 検索結果をもとに回答を作成する"
  },
  "processOptions": {
    "rag": true,
    "ragTarget": "社内マニュアル、過去のQ&A"
  },
  "inputOptions": {
    "textInput": true
  },
  "outputOptions": {
    "plainText": true
  }
}
```

このデータをDifyアシスタントGemに渡すと、以下のような具体的な構築方法が得られます:

- 知識検索ノードの設定方法
- LLMノードでの回答生成プロンプト
- エラーハンドリングの実装方法

### 6. 品質チェックリスト

高品質なDifyアシスタントGemを作るために、以下を確認してください:

- [ ] 要件定義が明確で具体的である
- [ ] Input、Process、Outputがすべて定義されている
- [ ] エクスポートデータに必要な情報がすべて含まれている
- [ ] DifyアシスタントGemに適切なシステムプロンプトが設定されている
- [ ] 知識ベースに必要な情報が追加されている
- [ ] 実際のワークフローでテストが完了している

## ライセンス

このプロジェクトはプライベートプロジェクトです。

